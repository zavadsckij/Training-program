(this["webpackJsonptraining-program"]=this["webpackJsonptraining-program"]||[]).push([[0],{26:function(e,t,n){e.exports=n.p+"static/media/loader.d0ed0a5c.gif"},43:function(e,t,n){e.exports=n.p+"static/media/logo.ff6128ca.png"},45:function(e,t,n){e.exports=n(84)},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),i=n.n(c),u=(n(50),n(51),n(10)),s=n(5),o=(n(52),n(41)),l=n.n(o),m=n(8),d=n(3),p=n(19),f={users:[],currentUser:{},isInit:!1,isFetching:!1,isLoad:!1,admin:null},b=function(e){return{type:"SET__INIT",init:e}},E=function(e){return{type:"SET__FETCHING",isFetching:e}},g=function(e){return{type:"SET__CURRENT__USER",user:e}},h=function(e){return{type:"SET__USER__SIZE",size:e}},j=function(e){return{type:"GET__USERS",users:e}},v=function(e,t){return function(n){n(E(!0)),p.put("https://training-program-40a94.firebaseio.com/users/".concat(t,".json"),e).then((function(e){n(h(e.data)),n(E(!1))}))}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;return"SET__LOAD"===t.type?Object(d.a)(Object(d.a)({},e),{},{isLoad:t.isLoad}):"SET__FETCHING"===t.type?Object(d.a)(Object(d.a)({},e),{},{isFetching:t.isFetching}):"SET__INIT"===t.type?Object(d.a)(Object(d.a)({},e),{},{isInit:t.init}):"SET__ADMIN"===t.type?Object(d.a)(Object(d.a)({},e),{},{admin:t.admin}):"GET__USERS"===t.type?Object(d.a)(Object(d.a)({},e),{},{users:t.users}):"SET__CURRENT__USER"===t.type?Object(d.a)(Object(d.a)({},e),{},{currentUser:t.user}):"SET__USER__SIZE"===t.type?Object(d.a)(Object(d.a)({},e),{},{currentUser:Object(d.a)(Object(d.a)({},e.currentUser),{},{size:t.size})}):"SET__RECORDS__LIST"===t.type?Object(d.a)(Object(d.a)({},e),{},{currentUser:Object(d.a)(Object(d.a)({},e.currentUser),{},{records:t.recordList})}):"SET__TRAINING__LIST"===t.type?Object(d.a)(Object(d.a)({},e),{},{currentUser:Object(d.a)(Object(d.a)({},e.currentUser),{},{program:t.program})}):e},_=n(6),S=Object(_.b)((function(){return{}}),{removeUser:function(e){return function(t){t(E(!0)),p.put("https://training-program-40a94.firebaseio.com/users.json",e).then((function(e){t(j(Object.values(e.data))),t(E(!1))}))}}})((function(e){var t=e.user,n=e.name,a=e.setCurrentUser,c=e.removeUser,i=e.users;return r.a.createElement("li",null,r.a.createElement(u.b,{to:"users/".concat(n),onClick:function(){a(t)}},t.name," "),r.a.createElement("button",{onClick:function(){c(i.filter((function(e){return e.name!==t.name})))}},"delete"))})),y=n(26),I=n.n(y);var T=Object(_.b)((function(e){return{}}),{setCurrentUser:g,addUser:function(e,t){return function(n){var a={name:e,records:["\u0440\u0435\u043a\u043e\u0440\u0434"],program:[{title:"\u043f\u0435\u0440\u0432\u0430\u044f \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0430",data:(new Date).toLocaleDateString(),body:"\u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f"}],size:{"\u0432\u0435\u0441":"0","\u0433\u0440\u0443\u0434\u044c":"0","\u0442\u0430\u043b\u0438\u044f":"0","\u0431\u0435\u0434\u0440\u0430":"0","\u0431\u0435\u0434\u0440\u043e":"0","\u0440\u0443\u043a\u0430":"0"}};t.push(a),n(E(!0)),p.put("https://training-program-40a94.firebaseio.com/users.json",t).then((function(e){n(j(Object.values(e.data))),n(E(!1))}))}}})((function(e){var t=e.users,n=e.setCurrentUser,c=e.addUser,i=e.isFetching,u=Object(a.useState)(""),s=Object(m.a)(u,2),o=s[0],l=s[1],d=Object(a.useState)(!1),p=Object(m.a)(d,2),f=p[0],b=p[1];return i?r.a.createElement("img",{src:I.a,alt:"",className:"loader"}):r.a.createElement("div",null,r.a.createElement("ul",{style:{display:"block"},onDoubleClick:function(){b(!1)}},t.length?t.map((function(e,a){return r.a.createElement(S,{name:a,user:e,key:e.name,setCurrentUser:n,users:t})})):"no users"),f?r.a.createElement("form",{onSubmit:function(e){!function(e){e.preventDefault(),c(o,t),b(!1)}(e)}},r.a.createElement("input",{type:"text",value:o,placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",className:"form__text-input",onChange:function(e){l(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"add user",className:"form__submit-input"})):r.a.createElement("button",{onClick:function(){b(!0)}},"Add User"))})),U=n(13),C=Object(U.c)(s.g,Object(_.b)((function(e){return{user:e.currentUser}}),{setCurrentUser:g}))((function(e){return r.a.createElement("div",null,e.user.name?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,e.user.name),r.a.createElement("ul",null,Object.keys(e.user).map((function(t){return"name"!==t?r.a.createElement("li",{key:t},r.a.createElement(u.b,{to:"/users/".concat(e.match.params.userId,"/").concat(t)},t)):null})))):"user")})),k=Object(U.c)(s.g,Object(_.b)((function(e){return{user:e.currentUser}}),{addTraining:function(e,t){return function(n){n(E(!0)),p.put("https://training-program-40a94.firebaseio.com/users/".concat(t,".json"),e).then((function(e){n({type:"SET__TRAINING__LIST",program:e.data}),n(E(!1))}))}}}))((function(e){var t=e.user,n=e.match.url.split("/"),c=n[n.length-1],i=e.match.params.userId+"/"+c,u=Object(a.useState)(""),s=Object(m.a)(u,2),o=s[0],l=s[1],d=Object(a.useState)(""),p=Object(m.a)(d,2),f=p[0],b=p[1],E=Object(a.useState)(!1),g=Object(m.a)(E,2),h=g[0],j=g[1];return r.a.createElement("div",{onDoubleClick:function(){j(!1)}},h?r.a.createElement("form",{onSubmit:function(n){!function(n){if(o.trim()&&f.trim()){var a={title:o,body:f,data:(new Date).toLocaleDateString()};n.preventDefault(),t.program.unshift(a),e.addTraining(t.program,i),j(!1)}else n.preventDefault(),b("\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0443"),l("\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")}(n)},className:"records-form"},r.a.createElement("input",{type:"text",value:o,onChange:function(e){l(e.currentTarget.value)},placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438",className:"form__title-input"}),r.a.createElement("textarea",{value:f,placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f",className:"form__body-input",onChange:function(e){b(e.currentTarget.value)}}),r.a.createElement("input",{type:"submit",value:"add training",className:"records-form-button form__submit-input"})):r.a.createElement("button",{onClick:function(){j(!0)}},"Add training"),t[c]?e.user[c].map((function(n,a){return r.a.createElement("div",{key:a,className:"training"},r.a.createElement("p",null,n.title),r.a.createElement("p",null,n.data),r.a.createElement("div",null,n.body.split("\n").map((function(e,t){return r.a.createElement("p",{key:t},e)}))),r.a.createElement("button",{onClick:function(){var a=t.program.filter((function(e){return e.body!==n.body}));e.addTraining(a,i)}},"delete training"))})):"program")})),N=Object(U.c)(s.g,Object(_.b)((function(e){return{user:e.currentUser}}),{addRecord:function(e,t){return function(n){n(E(!0)),p.put("https://training-program-40a94.firebaseio.com/users/".concat(t,".json"),e).then((function(e){n({type:"SET__RECORDS__LIST",recordList:e.data}),n(E(!1))}))}}}))((function(e){var t=e.user.records,n=e.match.url.split("/"),c=n[n.length-1],i=e.match.params.userId+"/"+c,u=Object(a.useState)(!1),s=Object(m.a)(u,2),o=s[0],l=s[1],d=Object(a.useState)(""),p=Object(m.a)(d,2),f=p[0],b=p[1];return r.a.createElement("div",{onDoubleClick:function(){l(!1)}},o?r.a.createElement("form",{onSubmit:function(n){!function(n){f.trim()?(n.preventDefault(),t.unshift(f),e.addRecord(t,i),l(!1)):(n.preventDefault(),b("\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u0438\u0447\u043d\u044b\u0439 \u0440\u0435\u043a\u043e\u0440\u0434"))}(n)},style:{display:"block"}},r.a.createElement("input",{type:"text",value:f,placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0440\u0435\u043a\u043e\u0440\u0434",className:"form__text-input",onChange:function(e){b(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"submit",className:"form__submit-input"})):r.a.createElement("button",{onClick:function(){l(!0)}},"add record"),r.a.createElement("ul",null,e.user.name?t.map((function(n,a){return r.a.createElement("li",{key:a},r.a.createElement("p",null,n," "),r.a.createElement("button",{onClick:function(){var a=t.filter((function(e){return n!==e}));e.addRecord(a,i)}},"delete record"))})):"records"))})),w=Object(U.c)(s.g,Object(_.b)((function(e){return{user:e.currentUser}}),{addSize:v,setUserSize:h}))((function(e){var t=e.match.url.split("/"),n=t[t.length-1],c=e.match.params.userId+"/"+n,i=Object(a.useState)(e.user.size),u=Object(m.a)(i,2),s=u[0],o=u[1];return r.a.createElement("form",{onSubmit:function(t){!function(t){s?(t.preventDefault(),e.addSize(s,c),e.setAddMode(!1)):t.preventDefault()}(t)}},e.user.size&&Object.entries(s).map((function(e){var t=e[0];return r.a.createElement("label",{key:t},t," ",r.a.createElement("input",{type:"text",value:s[t],onChange:function(e){var n=e.currentTarget.value,a=Object(d.a)({},s);a[t]=n,o(a)}}))})),r.a.createElement("input",{type:"submit",value:"submit",className:"form__submit-input"}))})),D=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,e.user.size&&Object.entries(e.user.size).map((function(e){return r.a.createElement("p",{key:e[0]},r.a.createElement("b",null,e[0])," ",r.a.createElement("span",null,e[1]))}))),r.a.createElement("button",{onClick:function(){e.setAddMode(!0)}},"add size"))},A=Object(_.b)((function(e){return{user:e.currentUser}}),{addSize:v})((function(e){var t=e.user,n=Object(a.useState)(!1),c=Object(m.a)(n,2),i=c[0],u=c[1];return r.a.createElement("div",{onDoubleClick:function(){u(!1)}},i?r.a.createElement(w,{setAddMode:u,addSize:v}):r.a.createElement(D,{setAddMode:u,user:t})||"size")})),R=Object(_.b)((function(e){return{isInit:e.isInit}}),{setInit:b,setAdmin:function(e){return{type:"SET__ADMIN",admin:e}}})((function(e){var t=e.isInit,n=e.setInit,c=e.setAdmin,i=Object(a.useState)(""),u=Object(m.a)(i,2),o=u[0],l=u[1],d=Object(a.useState)(""),p=Object(m.a)(d,2),f=p[0],b=p[1];return r.a.createElement("div",{className:"login"},t?r.a.createElement(s.a,{to:"/users"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Enter password"),r.a.createElement("form",{className:"home-form"},r.a.createElement("input",{type:"email",placeholder:"email",value:f,onChange:function(e){b(e.currentTarget.value)}}),r.a.createElement("input",{type:"password",placeholder:"password",value:o,onChange:function(e){l(e.currentTarget.value)}}),r.a.createElement("input",{type:"button",value:"Sign In",onClick:function(e){!function(e){e.preventDefault(),o.trim()&&f.trim()?L.auth().signInWithEmailAndPassword(f,o).then((function(e){n(!0),c(e.user.email)})).catch((function(e){var t=e.message;alert(t)})):(l("write password"),b("write email"))}(e)}}),r.a.createElement("input",{type:"button",value:"Registration",onClick:function(e){!function(e){e.preventDefault(),o.trim()&&f.trim()?L.auth().createUserWithEmailAndPassword(f,o).then((function(e){alert("registration is successful"),n(!0),c(e.user.email)})).catch((function(e){var t=e.message;alert(t)})):(l("write password"),b("write email"))}(e)}}))))})),z=n(43),x=n.n(z);var F=function(e){var t=e.setInit,n=e.isInit,a=e.admin;return r.a.createElement("div",{className:"header"},r.a.createElement(u.b,{to:"/"},r.a.createElement("img",{src:x.a,className:"logo"})),r.a.createElement("nav",null,r.a.createElement("ul",null,n?r.a.createElement("li",{onClick:function(){L.auth().signOut().then((function(){t(!1)})).catch((function(e){alert(e.message)}))}},"hello, ",a):r.a.createElement("li",null,"Sign in"),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/users"},"Users")))))},L=l.a.initializeApp({apiKey:"AIzaSyA_MbcVZ5ZSTsnpgT8yMddA_iMjZb9aaB4",authDomain:"training-program-40a94.firebaseapp.com",databaseURL:"https://training-program-40a94.firebaseio.com",projectId:"training-program-40a94",storageBucket:"training-program-40a94.appspot.com",messagingSenderId:"314175359931",appId:"1:314175359931:web:9816e7f91ec88d0162129e"});var M=Object(_.b)((function(e){return{isInit:e.isInit,users:e.users,isFetching:e.isFetching,admin:e.admin}}),{getUsers:j,setFetching:E,getUsersFromAPI:function(){return function(e){E(!0),p.get("https://training-program-40a94.firebaseio.com/users.json").then((function(t){e(j(t.data)),e(E(!1))}))}},setInit:b})((function(e){var t=e.isInit,n=e.users,c=e.isFetching,i=e.getUsersFromAPI,o=e.setInit,l=e.admin;return Object(a.useEffect)((function(){i()}),[]),r.a.createElement(u.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(F,{setInit:o,isInit:t,admin:l}),c?r.a.createElement("img",{src:I.a,alt:"",className:"loader"}):r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/users",render:function(){return t?r.a.createElement(T,{users:n,isFetching:c}):r.a.createElement(s.a,{to:"/"})}}),r.a.createElement(s.b,{exact:!0,path:"/",render:function(){return r.a.createElement(R,null)}}),r.a.createElement(s.b,{exact:!0,path:"/users/:userId",render:function(){return t?r.a.createElement(C,null):r.a.createElement(s.a,{to:"/"})}}),r.a.createElement(s.b,{exact:!0,path:"/users/:userId/program",render:function(){return t?r.a.createElement(k,null):r.a.createElement(s.a,{to:"/"})}}),r.a.createElement(s.b,{exact:!0,path:"/users/:userId/records",render:function(){return t?r.a.createElement(N,null):r.a.createElement(s.a,{to:"/"})}}),r.a.createElement(s.b,{exact:!0,path:"/users/:userId/size",render:function(){return t?r.a.createElement(A,null):r.a.createElement(s.a,{to:"/"})}}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=n(44),Z=Object(U.d)(O,Object(U.a)(G.a));window.store=Z;var B=Z;i.a.render(r.a.createElement(_.a,{store:B},r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.584ed484.chunk.js.map